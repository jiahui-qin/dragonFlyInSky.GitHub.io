---
title: 全局变量那点事
date: 2021-03-10 18:55:40
tags:
- java
categories:
-java初学者教程
---

为什么想要开这篇文章呢？因为在写代码的时候，发现一个很诡异的问题：

有一个list想要插入数据库，在插入之前都会清空一遍数据库。但是每次插入完之后都发现好像清空数据库失败了。代码大概如下：

<!--more-->

````java
public class TestImpl {
    List<Link> linkInfo = new ArrayList<>();
    public static void main(String[] args){
        Map<String,Object> map = new HashMap<>();
        map.put("someAttr", attr);
        linkMapper.deleteByMap(map);
        linkInfo = getInfo();
        linkService.saveBatch(linkInfo)
    }
}
````

查了很多次都没有发现问题，断点执行后发现：每次linkInfo的长度都变得很长，就从最开始发现：每次linkInfo都带着上次执行之后的结果，append了现在的结果。

这本来应该是个很简单的错误，我却看了很久，还是基础知识太薄弱了啊。

## 全局变量：
